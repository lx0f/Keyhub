<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<main class="mb-3">
    <div class="container">
        <h3 class="my-4">We appreciate your feedback</h3>
        <form action="/ticket" method="post" id="ticket-form">
            <div class="row">
                <div class="col-9">
                    <div class="card">
                        <div class="card-header">
                            <div class="title form-group">
                                <label for="title">Title</label>
                                <input type="text" name="title" id="title" class="form-control"
                                    placeholder="e.g. broken cart" />
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="quill-editor" class="mb-3"></div>
                            <input type="hidden" name="description" id="description">
                            <div class="submit d-flex justify-content-end">
                                <button type="submit" class="btn btn-dark">Submit Ticket</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-3">
                    <div class="category mb-3">
                        <div>Category</div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="category" id="category1" value="bug"
                                checked />
                            <label class="form-check-label" for="category1">
                                Bug
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="category" id="category2"
                                value="request" />
                            <label class="form-check-label" for="category2">
                                Request
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="category" id="category3"
                                value="product" />
                            <label class="form-check-label" for="category3">
                                Product
                            </label>
                        </div>
                    </div>
                    <hr />
                    <div class="severity">
                        <div>Severity</div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="severity" id="severity1" value="low"
                                checked />
                            <label class="form-check-label" for="severity1">
                                Low
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="severity" id="severity2"
                                value="medium" />
                            <label class="form-check-label" for="severity2">
                                Medium
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="severity" id="severity3" value="high" />
                            <label class="form-check-label" for="severity3">
                                High
                            </label>
                        </div>

                    </div>
                </div>
            </div>
        </form>
    </div>
</main>
<script>
    const quill = new Quill('#quill-editor', { theme: 'snow' });
    const textarea = document.getElementById('description');
    const form = document.getElementById("ticket-form");
    form.addEventListener('submit', (e) => {
        const contents = quill.getContents();
        const jsonContents = JSON.stringify(contents, null, 2).toString();
        textarea.value = jsonContents;
    });
</script>